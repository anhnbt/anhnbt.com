function toPerfectName(e){e.innerHTML="Đang đổi tên...";const t=document.getElementById("result"),n=document.getElementById("txtMessage"),s=document.getElementById("myName"),i=new XMLHttpRequest;if(""===s.value)return e.innerHTML="Tạo tên kí tự đặc biệt",s.focus(),s.classList.add("is-danger"),void(n.innerHTML='<div class="message is-danger" role="alert"><p class="message-body">Ô nhập tên không được bỏ trống!</p></div>');try{const o={myName:s.value.trim(),symbolLeft:document.getElementById("symbolLeft").value,symbolRight:document.getElementById("symbolRight").value,symbolCenter:document.getElementById("symbolCenter").value};e.classList.add("is-loading"),i.onreadystatechange=function(){if(4===this.readyState&&200===this.status){s.classList.remove("is-danger");const i=JSON.parse(this.responseText);let o="";if(i.recommendChars)for(let e=0;e<i.recommendChars.length;e++)o+=`<div class="field has-addons">\n                <div class="control is-expanded">\n                    <input type="text" class="input" value="${i.recommendChars[e]}" onfocus="this.select();" onmouseup="return false;">\n                </div>\n                <div class="control">\n                    <button type="button" class="button is-info" onclick="copyToClipboardInput(this);">\n                    Sao chép\n                    </button>\n                </div>\n            </div>`;if(i.chars)for(let e=0;e<i.chars.length;e++)o+=`<div class="field has-addons">\n                <div class="control is-expanded">\n                    <input type="text" class="input" value="${i.chars[e]}" onfocus="this.select();" onmouseup="return false;">\n                </div>\n                <div class="control">\n                    <button type="button" class="button is-info" onclick="copyToClipboardInput(this);">\n                    Sao chép\n                    </button>\n                </div>\n            </div>`;t.innerHTML=o,setTimeout((function(){n.innerHTML='<p class="has-text-centered has-text-success">↓↓ Thành công! Kéo xuống dưới nhé ↓↓<p>',e.classList.remove("is-loading"),e.innerHTML="Tạo lại tên"}),2e3)}},i.open("POST","https://anhnbt.kitudacbiet.com",!0),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(o))}catch(e){n.innerHTML="Đã xảy ra lỗi ngoại lệ: "+e.description}}function loadMoreNickName(e,t,n){const s=document.getElementById("nickNameList");s.innerHTML=`<img class="d-block mx-auto" src="${contextPath}images/spinner.gif" alt="loading"><p class="text-center">Đang tải dữ liệu ...</p>`;const i=new XMLHttpRequest;i.open("GET",contextPath+"nicknames?page="+t+"&size="+n,!0),i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=function(){if(4===i.readyState&&200===i.status)if(i.responseText){const o=JSON.parse(i.responseText);e.remove();let a='<div class="box tags">';for(let e=0;e<o.content.length;e++)a+='<span class="tag" data-clipboard-text="'+o.content[e].nickname+'">'+o.content[e].nickname+"</span>&nbsp;";a+=`</div><div class="has-text-centered mb-1">\n                    <button onclick="loadMoreNickName(this, ${t}+1, ${n})" class="button is-primary is-small">Xem tiếp »</button>\n                   </div>`,s.innerHTML=a}else s.innerHTML='<div class="has-background-danger p-2 mb-2">Lỗi không nhận được dữ liệu từ máy chủ</div>';else 204===i.status?s.innerHTML=`<div class="has-background-warning p-2 mb-2">Đã tải hết dữ liệu.</div><div class="has-text-centered mb-1">\n                    <button onclick="loadMoreNickName(this, 1, ${n})" class="button is-primary is-small">Tải lại</button>\n                   </div>`:s.innerHTML='<div class="has-background-danger p-2 mb-2">Lỗi không xác định.</div>'},i.send()}function copyToClipboardInput(e){copyToClipboard(e.parentElement.parentElement.children[0].children[1]),e.classList.remove("is-info"),e.classList.add("is-success"),e.innerHTML="Đã chép",setTimeout((function(){e.classList.remove("is-success"),e.classList.add("is-info"),e.innerHTML="Sao chép"}),1e3)}function copyToClipboardInputWithLabel(e){copyToClipboard(e.parentElement.parentElement.children[0].children[0]),e.classList.remove("is-info"),e.classList.add("is-success"),e.innerHTML="Đã chép",setTimeout((function(){e.classList.remove("is-success"),e.classList.add("is-info"),e.innerHTML="Sao chép"}),1e3)}function copyToClipboard(e){e.select(),e.setSelectionRange(0,99999),document.execCommand("copy")}document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("btn-close");e&&e.addEventListener("click",(function(){document.getElementById("copyModal").classList.toggle("is-active")}));const t=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);t.length>0&&t.forEach((e=>{e.addEventListener("click",(()=>{const t=e.dataset.target,n=document.getElementById(t);e.classList.toggle("is-active"),n.classList.toggle("is-active")}))}))}));const tags=document.querySelectorAll(".tag");for(let e=0;e<tags.length;e++){const t=tags[e].getAttribute("data-clipboard-text");t&&tags[e].addEventListener("click",(function(){document.getElementById("copyModal").classList.toggle("is-active"),document.getElementById("txtSymbol").value=t}))}